---
layout: post
title: "移动硬盘格式之争"
modified: 2017-7-24 19:38:00
excerpt: "移动硬盘使用哪种格式（NTFS、ext4、HFS+）的探索笔记......"
tags: [Notes]
comments: true
---

----------

新买了一块移动硬盘，默认格式是 NTFS 的，在 Mac 上只能读不能写。如何让硬盘能兼容 MacOS 和 Windows 系统，同时兼顾 **安全性、读写速率** 等，作出了如下对比：


### 一、什么是磁盘格式

通常所说的磁盘格式其实对应着 **文件系统**，因为磁盘上面不仅要存放文件数据本身，还需要有对这些数据进行管理的数据，比如文件起始位置、大小、创建时间等。这些数据又叫做元数据（Metadata）。不同文件系统的元数据是不一样的。元数据会占用额外的磁盘空间，但总体比例不会很大，它对功能的实现和性能的提升有非常重要的作用。格式化文件系统，其实就是写入一些初始化的元数据的过程。[(参考)](http://www.jianshu.com/p/35048ff94972)


### 二、磁盘格式对比

1. **NTFS**

	NTFS 是随着 Windows NT 操作系统而产生的，全称为 “NT File System”。通过基于事务处理模式的日志记录技术，保证了 NTFS 卷的一致性，实现了文件系统的可恢复性，具有较高的安全性和效率。


2. **HFS+**

	HFS+ 立足于古老的 HFS 设计，并做了很多改进。不过看到一些吐槽：其时间分辨率为秒级，效率较低；而且没有数据安全机制，遇到断电、内核崩溃和程序奔溃等问题，可能导致整个文件系统丢失。

3. **ext4**

	ext4 是 Linux 系统下的日志文件系统，兼具了 ext2 和 ext3 的优点还有提升，是高效的、优秀的、可靠的和极具特点的文件系统。网上有很多描述其各种牛逼和原理的文章，此处省略。。。

4. **FAT32**

	FAT32（File Allocation Table）有很好的 **兼容性**，几乎所有主流系统都能对其格式写入读取。它不是一个日记型的文件系统，也意味着该文件系统更容易发生问题，并且不支持 4GB 及以上单文件的存储。然而在 U盘 上该格式依旧流行，除了兼容性好之外，如果采用 NTFS 格式会带来更大的读写量，降低使用寿命。

### 三、总结

1. **硬盘分区**

	对于移动硬盘，可以设置多个分区，来享受在不同操作系统之间的便利：NTFS（Windows）、ext4（Linux）、HFS+（macOS）。

2. **使用 NTFS 格式**

	这个我个人的选择，因为经常需要在两个系统中切换使用，相比于 HFS+ 会有更高的效率和安全性。在 Mac 中默认支持读取 NTFS 格式，如果需要写入可用使用 **Tuxera NTFS for Mac** 之类的工具。

3. 如果需要安装操作系统，那么选定操作系统就决定了分区。
